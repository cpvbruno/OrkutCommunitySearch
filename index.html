<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <title>Search - Orkut Community Archive</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/paper/bootstrap.min.css" rel="stylesheet">
    <link href="CSS/style.css" rel="stylesheet">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  
  <script>
  $(window).load(function() {
     function loadNextLink(url,loadNextLink) 
  {
    if(nextLink != "") {
      return nextLink;
    }
    else {
      return url;
    }
  }

  });
 
function load() {
    $.ajaxPrefilter( function (options) {
    if (options.crossDomain && jQuery.support.cors) {
      var http = (window.location.protocol === 'http:' ? 'http:' : 'https:');
      options.url = http + '//cors-anywhere.herokuapp.com/' + options.url;
      //options.url = "http://cors.corsproxy.io/url=" + options.url;
    }
  });
  url = $("#link").val();
  name = $("#name").val();
  isLoading = 0;
  $('#modal').modal('show');

       $.get(
          url,
          function (response) {
             console.log("> ", response);
             $("#viewer").html(response);

              $(".innerContainer .leadingColumn a:contains('"+ name +"')").each(function() {
                  $("#qtd").append("<div class='findItem'><a  target=_blank'  href='"+ $(this).attr("href") +"'>"+ $(this).text() +"<a/></div>");
                  
                  

            });
            nextLink = "http://orkut.google.com/" + $("#viewer .mainContainer .innerContainer a.paginationSeparator:last-child").attr("href");
            $("#link").val(nextLink);
            $("#viewer").html("");


      })
      .done(function() {
        
          load();
         
        })

    
  }


  </script>


</head>
<body>
  <div class="loaderOverlay ld"></div>
  <div class="loader ld"><img src="img/loader.GIF" width="25px" />
  <p>That can take some time, a coffee would be great now.
  </p>
  <p>Taking so much time? This is probably because the number of pages that the application is reading, have in mind that are many communities by each index letter. Otherwhise could be your internet connection too, try using an wifi connection.</p></div>
  <!-- Modal -->
  <div id="modal" class="modal fade" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" onclick="closeLoader()">&times;</button>
          <h4 class="modal-title">Result:</h4>
        </div>
        <div class="modal-body">
          <div type="text" id="qtd">
            <p id="qtd">Results will show up soon.
            </p>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal" onclick="closeLoader()">Close</button>
        </div>
      </div>

    </div>
  </div>
  <div id="modalInfo" class="modal fade" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" onclick="closeLoader()">&times;</button>
          <h4 class="modal-title">Warning:</h4>
        </div>
        <div class="modal-body">
          Orkut has no relationship with this application, use with your own responsability.
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal" onclick="closeLoader()">Close</button>
        </div>
      </div>

    </div>
  </div>

  <div class="card">
    <div style="
    width: 100%;
    text-align: center;
">
    <img src="img/logo.jpg" style="
    width: 52%;
">
  </div>
    <div class="form-group">

  </div>
  <div class="form-group">
  <input type="text" placeholder="Community Name" id="name" class="form-control" required />
</div>
    <div class="form-group">
    <input type="text" placeholder="Orkut Link (Letter Index)" id="link" class="form-control" required />
  </div>

<div class="alert  alert-warning">
  <h4>Tips:</h4>
   <p>In the name of the community don't type complex words, try to be brief, the App will search for similar results.</p>
   <hr/>
  <p>Paste the link of the Orkut Community Archive page of the start letter you want, like if you want letter "A" community use:</p>
  <p>http://orkut.google.com/l-a.html (orkut can change this link anytime)</p>

 
</div>



  <a class="btn btn-primary pull-right" onclick="load()">Search</a>
  <div class="clearfix"></div>

<div id="viewer" style="display:none !important" >

</div>

<div class="infobtn">
  <a href="#" data-target="#modalInfo" data-toggle="modal">
  <svg height="22px" version="1.1" viewBox="0 0 22 22" width="22px" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" xmlns:xlink="http://www.w3.org/1999/xlink"><title/><defs><path d="M0,11 C0,4.92486745 4.92486745,0 11,0 C17.0751325,0 22,4.92486745 22,11 C22,17.0751325 17.0751325,22 11,22 C4.92486745,22 0,17.0751325 0,11 L0,11 Z M11.25,7.5 C11.940356,7.5 12.5,6.94035595 12.5,6.25 C12.5,5.55964405 11.940356,5 11.25,5 C10.559644,5 10,5.55964405 10,6.25 C10,6.94035595 10.559644,7.5 11.25,7.5 L11.25,7.5 Z M8.5,8.5 L8.5,9.5 L10,9.5 L10,16.5 L8.5,16.5 L8.5,17.5 L14,17.5 L14,16.5 L12.5,16.5 L12.5,8.5 L8.5,8.5 L8.5,8.5 Z" id="path-1"/></defs><g fill="none" fill-rule="evenodd" id="miu" stroke="none" stroke-width="1"><g id="circle_info_more-information_detail_glyph"><use fill="#000000" fill-rule="evenodd" xlink:href="#path-1"/><use fill="none" xlink:href="#path-1"/></g></g></svg>
</a>
</div>



</body>
</html>
